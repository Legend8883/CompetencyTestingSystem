<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/auth.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="logo">
                    <div class="logo-icon">T</div>
                    <span>–¢–µ—Å—Ç–ö–æ–º–ø</span>
                </div>
                <h1>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</p>
            </div>
            
            <div id="alert" class="alert hidden"></div>
            
            <form id="registerForm" class="auth-form">
                <div class="form-group">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email" required>
                    <div class="error-message" id="emailError"></div>
                </div>
                
                <div class="form-group">
                    <label for="firstName" class="form-label">–ò–º—è</label>
                    <input type="text" id="firstName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                    <div class="error-message" id="firstNameError"></div>
                </div>
                
                <div class="form-group">
                    <label for="lastName" class="form-label">–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" id="lastName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é" required>
                    <div class="error-message" id="lastNameError"></div>
                </div>
                
                <div class="form-group">
                    <label for="role" class="form-label">–†–æ–ª—å</label>
                    <select id="role" class="form-control" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
                        <option value="employee">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</option>
                        <option value="hr">HR-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</option>
                    </select>
                    <div class="error-message" id="roleError"></div>
                </div>
                
                <div class="form-group">
                    <label for="password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="password" class="form-control" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" required>
                    <div class="error-message" id="passwordError"></div>
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword" class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    <input type="password" id="confirmPassword" class="form-control" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                    <div class="error-message" id="confirmPasswordError"></div>
                </div>
                
                <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
                
                <div class="auth-footer">
                    <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="index.html">–í–æ–π—Ç–∏</a></p>
                </div>
            </form>
        </div>
        
        <div class="auth-info">
            <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–∏—Å—Ç–µ–º–µ</h2>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üéØ</div>
                    <h3>–¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞</h3>
                    <p>–û–±—ä–µ–∫—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">üìà</div>
                    <h3>–†–∞–∑–≤–∏—Ç–∏–µ –∫–∞—Ä—å–µ—Ä—ã</h3>
                    <p>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–ª—å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω –∏ –∑–æ–Ω —Ä–æ—Å—Ç–∞</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">ü§ù</div>
                    <h3>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ HR</h3>
                    <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏ –Ω–∞–≤—ã–∫–æ–≤</p>
                </div>
            </div>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const registerForm = document.getElementById('registerForm');
        const alertElement = document.getElementById('alert');
        
        if (registerForm) {
            registerForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π
                const email = document.getElementById('email').value.trim();
                const firstName = document.getElementById('firstName').value.trim();
                const lastName = document.getElementById('lastName').value.trim();
                const role = document.getElementById('role').value;
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è
                let isValid = true;
                
                if (!validateEmail(email)) {
                    showError('emailError', '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
                    isValid = false;
                } else {
                    hideError('emailError');
                }
                
                if (!firstName) {
                    showError('firstNameError', '–í–≤–µ–¥–∏—Ç–µ –∏–º—è');
                    isValid = false;
                } else {
                    hideError('firstNameError');
                }
                
                if (!lastName) {
                    showError('lastNameError', '–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é');
                    isValid = false;
                } else {
                    hideError('lastNameError');
                }
                
                if (!role) {
                    showError('roleError', '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å');
                    isValid = false;
                } else {
                    hideError('roleError');
                }
                
                if (!validatePassword(password)) {
                    showError('passwordError', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤');
                    isValid = false;
                } else {
                    hideError('passwordError');
                }
                
                if (password !== confirmPassword) {
                    showError('confirmPasswordError', '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
                    isValid = false;
                } else {
                    hideError('confirmPasswordError');
                }
                
                if (!isValid) return;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
                const submitBtn = document.getElementById('submitBtn');
                const originalText = submitBtn.textContent;
                submitBtn.innerHTML = '<span class="loading"></span> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...';
                submitBtn.disabled = true;
                
                try {
                    // –≠–º—É–ª—è—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–∞
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è –¥–µ–º–æ)
                    const user = {
                        email,
                        firstName,
                        lastName,
                        role,
                        fullName: `${firstName} ${lastName}`
                    };
                    localStorage.setItem('user', JSON.stringify(user));
                    
                    showAlert('success', '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≤—Ö–æ–¥...');
                    
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);
                    
                } catch (error) {
                    showAlert('error', '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
                    console.error('Registration error:', error);
                } finally {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                }
            });
        }
        
        function showAlert(type, message) {
            alertElement.textContent = message;
            alertElement.className = `alert alert-${type}`;
            alertElement.classList.remove('hidden');
            
            setTimeout(() => {
                alertElement.classList.add('hidden');
            }, 5000);
        }
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.classList.add('show');
            const input = document.getElementById(elementId.replace('Error', ''));
            if (input) input.classList.add('error');
        }
        
        function hideError(elementId) {
            const element = document.getElementById(elementId);
            element.classList.remove('show');
            const input = document.getElementById(elementId.replace('Error', ''));
            if (input) input.classList.remove('error');
        }
    });
    </script>
</body>
</html>